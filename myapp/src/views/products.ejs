<!DOCTYPE html>
<html lang="es">
<%- include('partials/head') %>

<body>
   <!-- <header> -->
   <%- include('partials/header') %>
   <!-- </header> -->


   <div class="products container">

      <div class="row">

         <!-- Product title -->
         <div class="col-12 d-flex flex-wrap justify-content-center p-4">
            <h2 class="product-title text-center">¿Qué estás buscando?</h1>
         </div>
         <!-- Product title -->

         <!-- Boostrap dropdown menu -->
         <div class="row w-100 m-0 mb-2 p-4 product-selector shadow rounded-lg">
            <% for(let i = 0; i < categories.length; i++) { %>
            <div class="dropdown col-6 col-md-4 col-lg-2">
               <a class="dropdown-item m-0 p-0 text-center" href="#" role="button" id="dropdownMenuLink"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <figure class="figure m-0 p-0">
                     <% for(let j = 0; j < products.length; j++) { 
                                if(products[j].categories.name == categories[i].name) { %>
                     <img src="/images/products/<%= products[j].images[0].name %>"
                        class="figure-img img-fluid shadow rounded-lg" alt="...">
                     <% break } } %>
                     <figcaption class="figure-caption text-center">
                        <%= categories[i].name %>
                     </figcaption>
                  </figure>
               </a>
               <div class="dropdown-menu p-2 col-12" aria-labelledby="dropdownMenuLink">
                  <% for(let j = 0; j < products.length; j++) { 
                        if(products[j].categories.name == categories[i].name) { %>
                  <a class="dropdown-item col-10 m-auto p-2" href="/products/index/<%= products[j].id %>">
                     <figure class="figure w-100 m-0 p-1 rounded-lg shadow">
                        <img src="/images/products/<%= products[j].images[0].name %>"
                           class="m-0 p-0 figure-img img-fluid rounded-lg w-100" alt="...">
                        <figcaption class="m-0 p-0 figure-caption dropdown text-center">
                           <%= products[j].name %>
                        </figcaption>
                     </figure>
                  </a>

                  <% } } %>
               </div>
            </div>
            <% } %>
         </div>
         <!-- Boostrap dropdown menu -->

         <!--article full description-->
         <div class="row w-100 m-0">
            <div class="col-12 d-flex flex-wrap p-0 main-product shadow rounded-lg">
               <div class="col-12 col-md-7 m-0 p-0 d-flex flex-wrap justify-content-center">
                  <div class="col-12 d-flex justify-content-center flex-wrap p-4">
                     <img class="main-product w-75 shadow rounded-lg"
                        src="/images/products/<%= preDetail.images[0].name %>" alt="">
                  </div>
                  <div class="col-12 d-flex flex-wrap justify-content-center m-0 p-4">
                     <% for(let i=0; i < preDetail.images.length; i++) { %>
                     <img class="example col-3 shadow rounded-lg p-1 m-0"
                        src="/images/products/<%= preDetail.images[i].name %>" alt="">
                     <% } %>
                  </div>
               </div>
               <div class="col-12 col-md-5 pt-4 d-flex flex-column border-left">
                  <h4 class="text-center productName pb-3"><%= preDetail.name %></h4>
                  <p class="text-justify text-center"><%= preDetail.description %></p>
                  <div class="d-flex flex-wrap">
                     <!-- Este bloque muestra los tamaños y colores disponibles del producto seleccionado -->
                     <div class="col-6 d-flex m-0 p-0 flex-column text-center">
                        <h5 class="mt-1">Tamaños: </h5>
                        <% for(let i=0; i < preDetail.sizes.length; i++) { %>
                        <h6><%= preDetail.sizes[i].tag %>:
                           <%= preDetail.sizes[i].size_main %>
                           <%= preDetail.categories.size_unit %></h6>
                        <% } %>
                     </div>

                     <div class="col-6 d-flex m-0 p-0 flex-column text-center">
                        <h5 class="mt-1">Colores: </h5>
                        <% for(let i=0; i < preDetail.colors.length; i++) { %>
                        <h6 class="text-capitalize"><%= preDetail.colors[i].name %></h6>
                        <% } %>
                     </div>
                  </div>


                  <div class="d-flex flex-row flex-wrap justify-content-between w-100 align-items-center mt-4">
                     <h4 class="w-50 text-center m-0 mb-2 p-0 pr-1 border border-warning rounded">
                        Precio: $ <%= preDetail.price %></h4>
                     <a class="m-0 mb-2 p-0 pl-1 w-50" href="/products/detail/<%= preDetail.id %>"><button type="button"
                           class="w-100 btn btn-warning btn-lg m-0 p-0 shadow rounded-lg">Lo
                           quiero</button></a>
                  </div>


               </div>

            </div>
         </div>
         <!--article full description-->
      </div>

   </div>

   <!-- <footer> -->
   <%- include('partials/footer') %>
   <!-- </footer> -->
   <%- include('partials/scriptsBootstrap') %>

   <script src="/js/products.js"></script>


</body>

</html>